use std::compile_fail;
use std::proto::Primitive;

fn type_name<T>() -> &[u8] {
    if <T: !Primitive> {
        compile_fail!("only primitive types are supported");
    }

    if <T: u8> {
        "u8"
    } else if <T: u16> {
        "u16"
    } else {
        "something else, lol"
    }
}   


#[export]
fn main() {
    println!("{}", type_name::<u8>());
    println!("{}", type_name::<u16>());
    
    // This would be a compile-time error
    // println!("{}", type_name::<&u8>());
}
